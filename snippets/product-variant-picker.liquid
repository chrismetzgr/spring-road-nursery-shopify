{% comment %}
  Renders product variant-picker
{% endcomment %}
{%- unless product.has_only_default_variant -%}
  <variant-selects
    id="variant-selects-{{ section.id }}"
    data-section="{{ section.id }}"
    data-url="{{ product.url }}"
    {{ block.shopify_attributes }}
  >
    {%- for option in product.options_with_values -%}
      {%- liquid
        assign swatch_count = option.values | map: 'swatch' | compact | size
        assign picker_type = 'button'
      -%}
      
      <fieldset class="js product-form__input product-form__input--pill">
        <legend class="form__label">Select {{ option.name }}</legend>
        {% render 'product-variant-options',
          product: product,
          option: option,
          block: block,
          picker_type: picker_type
        %}
      </fieldset>
    {%- endfor -%}

    <script type="application/json" data-selected-variant>
      {{ product.selected_or_first_available_variant | json }}
    </script>
  </variant-selects>
{%- endunless -%}

<style>
.product-form__input--pill {
  font-size: 12px;
  border: none;
  padding: 0;
  display: flex;
  flex-direction: column;
}

.product-form__input--pill input[type="radio"] {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.product-form__input--pill label {
  display: block;
  padding: 4px 0;
  cursor: pointer;
  transition: opacity 0.2s ease;
  border: none;
  background: none;
  text-align: left;
  margin: 2px 0;
}

.product-form__input--pill input[type="radio"]:checked + label {
  font-weight: bold;
}

/* Only show hover effect on available options */
.product-form__input--pill input[type="radio"]:not(:disabled):not(.disabled) + label:hover {
  opacity: 0.7;
}

/* Disabled/sold out styling */
.product-form__input--pill input[type="radio"]:disabled + label,
.product-form__input--pill input.disabled + label {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Prevent hover on disabled */
.product-form__input--pill input[type="radio"]:disabled + label:hover,
.product-form__input--pill input.disabled + label:hover {
  opacity: 0.3;
}
</style>
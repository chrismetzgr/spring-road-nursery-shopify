{% comment %}
  Renders product variant-picker
{% endcomment %}
 <script type="application/json" data-product-variants>
  {{ product.variants | json }}
</script>

{%- unless product.has_only_default_variant -%}
  <variant-selects
    id="variant-selects-{{ section.id }}"
    data-section="{{ section.id }}"
    data-url="{{ product.url }}"
    {{ block.shopify_attributes }}
  >
    {%- for option in product.options_with_values -%}
      {%- liquid
        assign swatch_count = option.values | map: 'swatch' | compact | size
        assign picker_type = 'button'
      -%}
      
      <fieldset class="js product-form__input product-form__input--pill">
        <legend class="form__label">Select {{ option.name }}</legend>
        {% render 'product-variant-options',
          product: product,
          option: option,
          block: block,
          picker_type: picker_type
        %}
      </fieldset>
    {%- endfor -%}

    <script type="application/json" data-selected-variant>
      {{ product.selected_or_first_available_variant | json }}
    </script>
  </variant-selects>
{%- endunless -%}
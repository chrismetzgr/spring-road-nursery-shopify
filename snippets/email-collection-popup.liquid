<script src="{{ 'email-collection-popup.js' | asset_url }}" defer="defer"></script>

<div id="email-collection-popup">
    <div class="exit-container">
      <img src="{{ "exit.png" | asset_url }}" height="20px" width="20px"/>
    </div>  
    <div id="pop-up-content">  
      <img src="{{ 'greetings.png' | asset_url }}" height="auto" width="650px"/>
    <div class="popup-text">
      From rare plants to handcrafted goods,
      we cultivate the strange and the beautiful
      on our mountainside in Vermont.  
      Be the first to hear about 
      what's unfurling in the garden.
    </div>
    <div id="popup-email-form" class="special">
          {% form 'customer', class: 'newsletter-form' %}
          {%- if form.posted_successfully? -%}
            <h3
              class="newsletter-form__message newsletter-form__message--success"
              id="Newsletter-success--{{ section.id }}"
              autofocus
            >
              {{- 'newsletter.success' | t }}
            </h3>
          {%  else %}
            <input type="hidden" name="contact[tags]" value="newsletter">
            <div class="newsletter-form__field-wrapper">
              <div class="field">
                <input
                  id="NewsletterForm--{{ section.id }}"
                  type="email"
                  name="contact[email]"
                  class="field__input"
                  value="{{ form.email }}"
                  aria-required="true"
                  autocorrect="off"
                  autocapitalize="off"
                  autocomplete="email"
                  {% if form.errors %}
                    autofocus
                    aria-invalid="true"
                    aria-describedby="Newsletter-error--{{ section.id }}"
                  {% elsif form.posted_successfully? %}
                    aria-describedby="Newsletter-success--{{ section.id }}"
                  {% endif %}
                  placeholder="Your Email Here"
                  required
                >
                <label class="newsletter-label field__label" for="NewsletterForm--{{ section.id }}">
                  Your Email Here
                </label>
                <button
                  type="submit"
                  class="newsletter-form__button field__button"
                  name="commit"
                  id="Subscribe"
                  aria-label="{{ 'newsletter.button_label' | t }}"
                >
                  <span class="svg-wrapper">
                    {{- 'icon-arrow.svg' | inline_asset_content -}}
                  </span>
                </button>
              </div>
              {%- if form.errors -%}
                <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
                  <span class="svg-wrapper">
                    {{- 'icon-error.svg' | inline_asset_content -}}
                  </span>
                  {{- form.errors.translated_fields.email | capitalize }}
                  {{ form.errors.messages.email -}}
                </small>
              {%- endif -%}
            </div>
          {%- endif -%}
        {% endform %}
      </div>
      <div class="pop-up-title wavy-underline-light">
          All Will Be Well In The Garden
      </div>
    </div>
</div>

<style>
/* Base styles - Desktop (>850px) */
.newsletter-form__message--success {
    font-family: var(--font-family-secondary);
}

#email-collection-popup {
    font-family: var(--font-family-secondary);
    display: none;
    width: 90%;
    max-width: 750px;
    padding: 25px 30px 50px;
    background-color: var(--color-background-tertiary);
    color: var(--font-color-light-secondary);
    position: fixed;
    top: 50%;
    left: 50%;
    margin-right: -50%;
    transform: translate(-50%, -50%);
    z-index: -1;
    border-radius: 10px;
}

#pop-up-content {
    margin-top: 50px;
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    gap: 20px;
}

#pop-up-content img {
    max-width: 100%;
    height: auto;
}

.exit-container img {
    position: absolute;
    right: 10px;
    top: 10px;
}

.exit-container img:hover {
    cursor: pointer;
}

.pop-up-title {
    font-weight: 500;
    text-transform: uppercase;
    font-size: 32px;
    letter-spacing: 2px;
    text-align: center;
    margin-top: 10px;
}

.popup-text {
    margin: 15px 10px;
    width: 90%;
    font-size: 16px;
    font-weight: 500;
    text-align: center;
    letter-spacing: 3px;
    line-height: 1.6;
}

#popup-email-form {
    width: 90%;
    background-color: var(--color-background-light);
    line-height: 0px;
}

#email-collection-popup .field__input {
  color: var(--font-color-dark);
}

.svg-wrapper, 
.newsletter-label {
    text-transform: uppercase;
    font-size: 16px;
    font-stretch: expanded;
    color: var(--font-color-dark);
}

.newsletter-label {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Tablet (481px - 850px) */
@media (min-width: 481px) and (max-width: 850px) {
    #email-collection-popup {
        padding: 20px 25px 40px;
    }

    #pop-up-content {
        margin-top: 35px;
        gap: 15px;
    }

    .pop-up-title {
        font-size: 26px;
        letter-spacing: 1.5px;
    }

    .popup-text {
        font-size: 15px;
        letter-spacing: 2.5px;
    }

    .svg-wrapper, 
    .newsletter-label {
        font-size: 15px;
    }
}

/* Mobile (â‰¤480px) */
@media (max-width: 480px) {
    #email-collection-popup {
        padding: 20px 15px 30px;
    }

    #pop-up-content {
        margin-top: 50px;
        gap: 12px;
    }

    .pop-up-title {
        font-size: 12px;
        letter-spacing: 1px;
        margin-top: 5px;
    }

    .popup-text {
        font-size: 14px;
        letter-spacing: 2px;
        margin: 10px 5px;
    }

    #popup-email-form {
        width: 95%;
    }

    .svg-wrapper, 
    .newsletter-label {
        margin-top: 5px;
        font-size: 10px;
    }
}
</style>
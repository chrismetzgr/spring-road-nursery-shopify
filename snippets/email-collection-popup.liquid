<script src="{{ 'email-collection-popup.js' | asset_url }}" defer="defer"></script>

<div id="email-collection-popup">
    <div class="exit-container">
      <img src="{{ "exit-dark.png" | asset_url }}" height="20px" width="20px"/>
    </div>  
    <div id="pop-up-content">  
      <img src="{{ 'greetings.png' | asset_url }}" height="auto" width="650px"/>
      <div class="pop-up-title special wavy-underline-green">
          All Will Be Well In The Garden
      </div>
    <div class="popup-text">
      From rare plants to handcrafted goods,
      we cultivate the strange and the beautiful
      on our mountainside in Vermont.  
      Be the first to hear about 
      whatâ€™s unfurling in the garden.
    </div>
    <div id="popup-email-form" class="special">
          {% form 'customer', class: 'newsletter-form' %}
          {%- if form.posted_successfully? -%}
            <h3
              class="newsletter-form__message newsletter-form__message--success"
              id="Newsletter-success--{{ section.id }}"
              autofocus
            >
              {{- 'newsletter.success' | t }}
            </h3>
          {%  else %}
            <input type="hidden" name="contact[tags]" value="newsletter">
            <div class="newsletter-form__field-wrapper">
              <div class="field">
                <input
                  id="NewsletterForm--{{ section.id }}"
                  type="email"
                  name="contact[email]"
                  class="field__input"
                  value="{{ form.email }}"
                  aria-required="true"
                  autocorrect="off"
                  autocapitalize="off"
                  autocomplete="email"
                  {% if form.errors %}
                    autofocus
                    aria-invalid="true"
                    aria-describedby="Newsletter-error--{{ section.id }}"
                  {% elsif form.posted_successfully? %}
                    aria-describedby="Newsletter-success--{{ section.id }}"
                  {% endif %}
                  placeholder="Your Email Here"
                  required
                >
                <label class="field__label" for="NewsletterForm--{{ section.id }}">
                  Your Email Here
                </label>
                <button
                  type="submit"
                  class="newsletter-form__button field__button"
                  name="commit"
                  id="Subscribe"
                  aria-label="{{ 'newsletter.button_label' | t }}"
                >
                  <span class="svg-wrapper">
                    {{- 'icon-arrow.svg' | inline_asset_content -}}
                  </span>
                </button>
              </div>
              {%- if form.errors -%}
                <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
                  <span class="svg-wrapper">
                    {{- 'icon-error.svg' | inline_asset_content -}}
                  </span>
                  {{- form.errors.translated_fields.email | capitalize }}
                  {{ form.errors.messages.email -}}
                </small>
              {%- endif -%}
            </div>
          {%- endif -%}
        {% endform %}
      </div>
    </div>
</div>

<style>
    #email-collection-popup {
        width: 750px;
        padding: 50px;
        background-color: var(--color-background-secondary);
        position: absolute;
        top: 40%;
        left: 50%;
        margin-right: -50%;
        transform: translate(-50%, -50%);
        z-index: 2001;
        border-radius: 10px;
        color: var(--font-color-dark);

        #pop-up-content {
          margin-top: 50px;
          display: flex; 
          flex-direction: column; 
          align-items: center; 
          justify-content: center;
          gap: 20px;
        }

        .exit-container {
          img {
            position: absolute;
            right: 10px;
            top: 10px;
          }
          img:hover {
            cursor:pointer;
          }
        }

        .pop-up-title {
            font-size: 27px;
        }

        .popup-text {
            width: 80%;
            font-size: 22px;
            text-align: center;
            line-height: 1;
        }

        #popup-email-form {
            width: 90%;
            background-color: var(--color-background);
        }
    }
  
</style>
<main class="srn-landing" role="main">
  <!-- Background Video with Fallback Image -->
  <div class="srn-landing__video-container">
    <img 
      src="{{ 'clouds-backup-background.jpg' | asset_url }}"
      alt="Spring Road Nursery clouds"
      class="srn-landing__fallback-image"
      height="auto"
      width="auto"
    />
    <!-- Video will be injected by JavaScript if autoplay is supported -->
  </div>

  <!-- Navigation Menu -->
  <nav class="srn-landing__nav" role="navigation" aria-label="Main navigation">
    <a href="{{ collections['web-shop'].url }}" class="srn-landing__nav-link">The Shop</a>
    <a href="/pages/nursery" class="srn-landing__nav-link">The Nursery</a>
    <a href="/pages/garden-design" class="srn-landing__nav-link">Garden Design</a>
  </nav>
  
  <!-- Logo -->
  <div class="srn-landing__logo">
    <img 
      src="{{ 'SRN-WHITE-LARGE.png' | asset_url }}" 
      alt="Spring Road Nursery"
      class="srn-landing__logo-image"
      width="auto" 
      height="auto"
    />
  </div>
  
  <!-- Location Footer -->
  <footer class="srn-landing__location" role="contentinfo">
    Tunbridge, Vermont
  </footer>
</main>

<script>
  /**
   * Landing Page Video Loader
   * Detects low power mode and only loads video if autoplay is supported
   */
  document.addEventListener('DOMContentLoaded', async function() {
    const videoContainer = document.querySelector('.srn-landing__video-container');
    
    if (!videoContainer) return;
    
    /**
     * Test if autoplay is supported (low power mode blocks autoplay)
     */
    async function canAutoplay() {
      const testVideo = document.createElement('video');
      testVideo.muted = true;
      testVideo.playsInline = true;
      testVideo.autoplay = true;
      
      // Use a tiny data URI video for testing
      testVideo.src = 'data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAr9tZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjY0MyA1YzY1NzA0IC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNSAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTMgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAA4mWIhAA3//728P4FNjuY0JcRzeidMx+/Fbi6NDe9zgAAAwAAAwAAD/gk2ABBi2SQgEBCw==';
      
      try {
        await testVideo.play();
        return true;
      } catch (err) {
        // Autoplay failed - likely low power mode or autoplay restrictions
        return false;
      }
    }
    
    /**
     * Load and initialize the background video
     */
    function loadVideo() {
      const video = document.createElement('video');
      video.className = 'srn-landing__video';
      video.autoplay = true;
      video.muted = true;
      video.loop = true;
      video.playsInline = true;
      video.src = 'https://www.dropbox.com/scl/fi/ki9d8ioobyxjbjr5l67o8/SRN_CLOUD-VIDEO_1003_H264-B.mp4?rlkey=ilzk8yynna2gpowp1nuv7nntw&raw=1';
      video.setAttribute('aria-label', 'Background video of Spring Road Nursery');
      
      // Fade in video when ready
      video.addEventListener('canplay', function() {
        video.classList.add('srn-landing__video--loaded');
      });
      
      // Check if already loaded
      if (video.readyState >= 3) {
        video.classList.add('srn-landing__video--loaded');
      }
      
      videoContainer.appendChild(video);
    }
    
    // Test autoplay support and load video if available
    const autoplaySupported = await canAutoplay();
    
    if (autoplaySupported) {
      loadVideo();
    }
    // Otherwise, fallback image remains visible
  });
</script>

<style>
/* ============================================
   LANDING PAGE STYLES
   ============================================ */

/* Prevent scrolling on landing page */
html:has(.srn-landing),
body:has(.srn-landing) {
  overflow: hidden;
  height: 100vh;
  width: 100vw;
}

/* Base Styles */
.srn-landing {
  font-family: var(--font-family-secondary);
  color: #FFFFFF;
  position: fixed;
  top: 0;
  left: 0;
  min-height: 100vh;
  height: 100vh;
  width: 100vw;
  font-stretch: expanded;
  overflow: hidden;
}

/* Video Container */
.srn-landing__video-container {
  height: 100vh;
  width: 100vw;
  position: fixed;
  top: 0;
  left: 0;
  background-color: black;
  z-index: -101;
}

/* Fallback Image */
.srn-landing__fallback-image {
  width: 100%;
  height: 100%;
  position: absolute;
  object-fit: cover;
  z-index: -100;
}

/* Video (overlays fallback image) */
.srn-landing__video {
  width: 100%;
  height: 100%;
  position: absolute;
  object-fit: cover;
  z-index: -99;
  opacity: 0;
  transition: opacity 1s ease-in;
}

.srn-landing__video--loaded {
  opacity: 1;
}

/* Navigation */
.srn-landing__nav {
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100vw - 120px);
  max-width: calc(100vw - 120px);
  font-size: 30px;
  letter-spacing: 0.07em;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  text-transform: uppercase;
}

.srn-landing__nav-link {
  text-decoration: none;
  color: #FFFFFF;
  transition: opacity 0.2s ease;
}

.srn-landing__nav-link:visited {
  color: #FFFFFF;
}

.srn-landing__nav-link:hover,
.srn-landing__nav-link:focus {
  opacity: 0.7;
}

/* Logo */
.srn-landing__logo {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: -99;
  pointer-events: none;
}

.srn-landing__logo-image {
  display: block;
  max-width: 90vw;
  height: auto;
}

/* Location Footer */
.srn-landing__location {
  position: absolute;
  left: 50%;
  bottom: 10%;
  transform: translateX(-50%);
  text-transform: uppercase;
}

/* ============================================
   MOBILE BREAKPOINT (â‰¤999px)
   ============================================ */
@media (max-width: 999px) {
  .srn-landing__nav {
    top: 55%;
    transform: translate(-50%, -50%);
    width: 100vw;
    height: 17.5vh;
    font-size: 20px;
    letter-spacing: 0.15em;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    padding: 0;
  }

  .srn-landing__logo {
    top: 33%;
  }

  .srn-landing__logo-image {
    width: 300px;
  }

  .srn-landing__location {
    font-size: 10px;
    bottom: 15%;
  }
}
</style>